# fork

直接创建副本，子进程的ctx（内存、变量等）是复制父进程的，只有在子进程有修改的时候才做修改，也就是copy-on-write。

✅ 启动快，内存共享更高效

❌ 在 PyTorch + CUDA 环境下容易出 bug（死锁、显存错误）

# spawn

启动时会创建一个全新的 Python 解释器进程，然后把需要执行的函数、类对象通过 pickle 序列化传过去运行。

✅ 干净、安全，避免 CUDA/线程池复制问题

❌ 启动慢，需要 pickle 序列化将父进程的信息复制到子进程，内存开销大

* PyTorch 有很多底层 C++/CUDA 线程池、内存池。

* 如果直接 fork，这些资源会被复制到子进程，但状态不一致 → 容易出现死锁、显存报错。

* spawn 会 干净地启动新进程，让每个进程单独初始化 CUDA 和通信环境。

🔑 一句话总结：
在 Python 多进程中，spawn 指的是通过启动一个新的 Python 解释器进程来运行目标函数的方法。在 PyTorch 中，由于 CUDA 和底层资源不适合被 fork 复制，官方推荐在多 GPU 训练和 DataLoader 中用 spawn 来保证稳定性。
